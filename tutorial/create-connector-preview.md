<!-- markdownlint-disable MD002 MD041 -->

<span data-ttu-id="31b61-101">Dans cet exercice, vous allez créer un connecteur personnalisé qui peut être utilisé dans le flux ou dans les applications de logique Azure.</span><span class="sxs-lookup"><span data-stu-id="31b61-101">In this exercise, you will create a new custom connector which can be used in Flow or in Azure Logic Apps.</span></span> <span data-ttu-id="31b61-102">Le fichier de définition de l’API Open est prédéfini avec le chemin d’accès correct `$batch` pour le point de terminaison Microsoft Graph et les paramètres supplémentaires pour activer l’importation simple.</span><span class="sxs-lookup"><span data-stu-id="31b61-102">The Open API definition file is prebuilt with the correct path for the Microsoft Graph `$batch` endpoint and additional settings to enable simple import.</span></span>

<span data-ttu-id="31b61-103">À l’aide d’un éditeur de texte, créez un `MSGraph-Delegate-Batch.swagger.json` fichier vide nommé et ajoutez le code suivant.</span><span class="sxs-lookup"><span data-stu-id="31b61-103">Using a text editor, create a new empty file named `MSGraph-Delegate-Batch.swagger.json` and add the following code.</span></span>

[!code-json[](../LabFiles/MSGraph-Delegate-Batch.swagger.json)]

<span data-ttu-id="31b61-104">Ouvrez un navigateur et accédez à [Microsoft Flow](https://flow.microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="31b61-104">Open a browser and navigate to [Microsoft Flow](https://flow.microsoft.com).</span></span> <span data-ttu-id="31b61-105">Connectez-vous à l’aide de votre compte d’administrateur client Office 365.</span><span class="sxs-lookup"><span data-stu-id="31b61-105">Sign in with your Office 365 tenant administrator account.</span></span> <span data-ttu-id="31b61-106">Dans le menu de gauche, développez **données** , puis sélectionnez **connecteurs personnalisés**.</span><span class="sxs-lookup"><span data-stu-id="31b61-106">In the left-hand menu, expand **Data** and choose **Custom connectors**.</span></span>

![Capture d’écran de l’élément de menu connecteurs personnalisés dans Microsoft Flow](./images/flow-conn1.png)

<span data-ttu-id="31b61-108">Sur la page **connecteurs personnalisés** , sélectionnez le **nouveau lien connecteur personnalisé** dans le coin supérieur droit, puis sélectionnez Importer un élément de **fichier openapi** dans le menu déroulant.</span><span class="sxs-lookup"><span data-stu-id="31b61-108">On the **Custom connectors** page choose the **New custom connector** link in the top right, then select the **Import an OpenAPI file** item in the drop-down menu.</span></span> <span data-ttu-id="31b61-109">Entrez `MS Graph Batch Connector` dans la zone de texte **nom du connecteur** .</span><span class="sxs-lookup"><span data-stu-id="31b61-109">Enter `MS Graph Batch Connector` in the **Connector name** text box.</span></span> <span data-ttu-id="31b61-110">Cliquez sur le bouton **Importer** pour télécharger le fichier d’API ouvert.</span><span class="sxs-lookup"><span data-stu-id="31b61-110">Choose **Import** button to upload the Open API file.</span></span> <span data-ttu-id="31b61-111">Accédez au `MSGraph-Delegate-Batch.swagger.json` fichier que vous avez créé.</span><span class="sxs-lookup"><span data-stu-id="31b61-111">Browse to the `MSGraph-Delegate-Batch.swagger.json` file you created.</span></span> <span data-ttu-id="31b61-112">Choisissez **Continuer** pour charger le fichier openapi.</span><span class="sxs-lookup"><span data-stu-id="31b61-112">Choose **Continue** to upload the OpenAPI file.</span></span>

 ![Capture d’écran de la boîte de dialogue créer un connecteur personnalisé](./images/flow-conn3.png)

<span data-ttu-id="31b61-114">Sur la page Configuration du connecteur, cliquez sur le lien **sécurité** dans le menu de navigation.</span><span class="sxs-lookup"><span data-stu-id="31b61-114">On the connector configuration page, choose the **Security** link in the navigation menu.</span></span> <span data-ttu-id="31b61-115">Renseignez les champs comme suit.</span><span class="sxs-lookup"><span data-stu-id="31b61-115">Fill in the fields as follows.</span></span>

- <span data-ttu-id="31b61-116">**Choisissez l’authentification qui est implémentée par votre API**:`OAuth 2.0`</span><span class="sxs-lookup"><span data-stu-id="31b61-116">**Choose what authentication is implemented by your API**: `OAuth 2.0`</span></span>
- <span data-ttu-id="31b61-117">**Fournisseur d’identité**:`Azure Active Directory`</span><span class="sxs-lookup"><span data-stu-id="31b61-117">**Identity Provider**: `Azure Active Directory`</span></span>
- <span data-ttu-id="31b61-118">**ID client**: ID d’application que vous avez créé dans l’exercice précédent</span><span class="sxs-lookup"><span data-stu-id="31b61-118">**Client id**: the application ID you created in the previous exercise</span></span>
- <span data-ttu-id="31b61-119">Clé **secrète client**: la clé que vous avez créée dans l’exercice précédent</span><span class="sxs-lookup"><span data-stu-id="31b61-119">**Client secret**: the key you created in the previous exercise</span></span>
- <span data-ttu-id="31b61-120">**URL de connexion**:`https://login.windows.net`</span><span class="sxs-lookup"><span data-stu-id="31b61-120">**Login url**: `https://login.windows.net`</span></span>
- <span data-ttu-id="31b61-121">**ID de client**:`common`</span><span class="sxs-lookup"><span data-stu-id="31b61-121">**Tenant ID**: `common`</span></span>
- <span data-ttu-id="31b61-122">**URL**de la `https://graph.microsoft.com` ressource : (sans finalisation/)</span><span class="sxs-lookup"><span data-stu-id="31b61-122">**Resource URL**: `https://graph.microsoft.com` (no trailing /)</span></span>
- <span data-ttu-id="31b61-123">**Étendue**: laisser vide</span><span class="sxs-lookup"><span data-stu-id="31b61-123">**Scope**: Leave blank</span></span>

<span data-ttu-id="31b61-124">Sélectionnez **créer un connecteur** dans la partie supérieure droite.</span><span class="sxs-lookup"><span data-stu-id="31b61-124">Choose **Create Connector** on the top-right</span></span>

![Capture d’écran de l’onglet sécurité dans la configuration du connecteur](./images/flow-conn4.png)

<span data-ttu-id="31b61-126">Une fois le connecteur créé, copiez l' **URL de redirection**générée.</span><span class="sxs-lookup"><span data-stu-id="31b61-126">After the connector has been created, copy the generated **Redirect URL**.</span></span>

![Capture d’écran de l’URL de redirection générée](./images/flow-conn5.png)

<span data-ttu-id="31b61-128">Revenez à l’application inscrite dans le [portail Azure](https://aad.portal.azure.com) que vous avez créé dans l’exercice précédent.</span><span class="sxs-lookup"><span data-stu-id="31b61-128">Go back to the registered application in the [Azure Portal](https://aad.portal.azure.com) you created in the previous exercise.</span></span> <span data-ttu-id="31b61-129">Sélectionnez **vue d’ensemble** sur le panneau de l' **application de lot MS Graph** , puis sélectionnez **Ajouter un URI de redirection**.</span><span class="sxs-lookup"><span data-stu-id="31b61-129">Select **Overview** on the **MS Graph Batch App** blade, then select **Add a Redirect URI**.</span></span> <span data-ttu-id="31b61-130">Ajoutez l' **URL de redirection** que vous avez copiée dans le champ **URI de redirection** , puis choisissez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="31b61-130">Add the **Redirect URL** you copied in the **Redirect URI** field and choose **Save**.</span></span>

![Capture d’écran du panneau URL de réponse dans le portail Azure](./images/flow-conn-preview6.png)
